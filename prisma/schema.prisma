generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PRISMA_DATABASE_URL")
}

model Character {
  id                String     @id @default(uuid())
  class             String     @default("Not chosen") @db.VarChar(32)
  mageTradition     String?    @db.VarChar(32)
  species           String     @default("Human") @db.VarChar(64)
  languages         String[]   @default(["Native", "Trade Cant"]) @db.VarChar(32)
  background        Background @relation(fields: [backgroundId], references: [id])
  backgroundDetails String?
  occupation        String     @default("Not chosen") @db.VarChar(64)
  name              String     @default("Anonymous") @db.VarChar(256)
  homeland          String?    @db.VarChar(256)
  goal              String     @default("My goal is to be the very best, like no one ever was.") @db.VarChar(256)
  description       String?
  image             String?
  experience        Int        @default(0)
  unspentPoints     Int        @default(0)
  renown            Int        @default(0)
  maxHp             Int        @default(0)
  currentHp         Int        @default(0)
  condition         String?    @db.VarChar(64)
  curentStrain      Int        @default(0)
  totalMoney        Int[]      @default([0, 0, 0])
  stashedMoney      Int[]      @default([0, 0, 0]) // in the future column in Party table
  isAlive           Boolean    @default(true)
  skillset          Skillset   @relation(fields: [skillsetId], references: [id])
  // attributes
  // foci
  // spells
  // readiedItems
  // stowedItems
  createdAt         DateTime   @default(now())
  updatedAt         DateTime   @updatedAt
  backgroundId      Int
  skillsetId        Int
}

model Background {
  id               Int                @id @default(autoincrement())
  name             String             @db.VarChar(32)
  description      String
  Character        Character[]
  BackgroundThrows BackgroundThrows[]
}

model BackgroundThrows {
  id           Int        @id @default(autoincrement())
  background   Background @relation(fields: [backgroundId], references: [id])
  type         String     @db.VarChar(32)
  skill        String     @db.VarChar(32)
  countTwice   Boolean    @default(false)
  backgroundId Int
}

model Attributes {
  id           Int @id @default(autoincrement())
  strength     Int @default(0)
  dexterity    Int @default(0)
  constitution Int @default(0)
  intelligence Int @default(0)
  wisdom       Int @default(0)
  charisma     Int @default(0)
}

model AttributeValues {
  id                 Int  @id @default(autoincrement())
  score              Int
  scoreBoost         Int?
  modifier           Int?
  developedAttribute Int?
}

model Skill {
  id          Int    @id @default(autoincrement())
  name        String @db.VarChar(32)
  description String
}

model Skillset {
  id        Int         @id @default(autoincrement())
  admin     Int?
  connect   Int?
  convince  Int?
  craft     Int?
  exert     Int?
  heal      Int?
  know      Int?
  lead      Int?
  magic     Int?
  notice    Int?
  perform   Int?
  pray      Int?
  punch     Int?
  ride      Int?
  sail      Int?
  shoot     Int?
  sneak     Int?
  stab      Int?
  survive   Int?
  trade     Int?
  work      Int?
  Character Character[]
}

model Foci {
  id                 Int  @id @default(autoincrement())
  snipersEye         Int?
  developedAttribute Int?
  // etc...
}

model ClassAbilities {
  id                 Int     @id @default(autoincrement())
  class              String  @unique @db.VarChar(32)
  masterfulExpertise Boolean @default(false)
  quickLearner       Boolean @default(false)
  arcaneTradition    Boolean @default(false)
  killingBlow        Boolean @default(false)
  veteransLuck       Boolean @default(false)
}

model Item {
  itemId           Int     @id @default(autoincrement())
  itemName         String  @unique @db.VarChar(128)
  costSilver       Int
  encumbrance      Int
  quantity         Int?
  quantityModifier String? @db.VarChar(64)
  isWeightless     Boolean @default(false)
  isWeightlessWorn Boolean @default(false)
  canBeBundled     Boolean @default(false)
}

model Weapon {
  weaponId     Int      @id @default(autoincrement())
  weaponName   String   @unique @db.VarChar(128)
  costSilver   Int
  encumbrance  Int
  attribute    String   @db.VarChar(10)
  traits       String[]
  shockDmg     Int?
  shockHit     Int?
  requiresAmmo Boolean  @default(false)
  closeRange   Int?
  farRange     Int?
}

model Armor {
  armorId     Int     @id @default(autoincrement())
  armorName   String  @unique @db.VarChar(128)
  costSilver  Int
  encumbrance Int
  armorClass  Int
  isShield    Boolean @default(false)
}

model Spell {
  spellId     Int     @id @default(autoincrement())
  name        String  @unique @db.VarChar(64)
  description String
  level       Int
  tradition   String? @db.VarChar(32)
}

model Art {
  artId       Int     @id @default(autoincrement())
  name        String  @unique @db.VarChar(64)
  description String
  tradition   String? @db.VarChar(32)
}
